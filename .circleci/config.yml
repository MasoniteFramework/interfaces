version: 2.1

commands:
    pytest:
        steps:
            - checkout
            - run: pip install . --user
            - run: pip install pytest --user
            - run: python -m pytest

jobs:
    build:
        docker:
            - image: 'circleci/python:3.6'
        steps:
            - pytest
    Python 3.4:
        docker:
            - image: 'circleci/python:3.4'
        steps:
            - pytest
    Python 3.5:
        docker:
            - image: 'circleci/python:3.5'
        steps:
            - pytest
    Python 3.7:
        docker:
            - image: 'circleci/python:3.7'
        steps:
            - pytest
            

workflows:
    version: 2
    builds_and_test:
        jobs:
            - build